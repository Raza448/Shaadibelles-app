<style>
    .chosen-container{
    width: auto !important;
}
</style>
<div class="row">
<div class="col-lg-12">
  <div class="panel blank-panel">
    <div class="panel-body">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h4>Complete this form to {{buttonText}} menu</h4>
        </div>
        <div class="ibox-content">
          <form role="form" ng-submit="submit(item)">
            <div class="col-lg-6">
              <div class="form-group">
                <label>Title</label>
                <input type="text" class="form-control" ng-model="menu.name" Placeholder="Menu Name" required>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group" ng-init="menu.visible = true">
                <label for="shortcut">Visiblity</label>
                <br>
                <a class="btn btn-success" ng-show="menu.visible" ng-click="menu.visible = false">Visible</a>
                <a class="btn btn-danger" ng-hide="menu.visible" ng-click="menu.visible = true">Not Visible</a>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group">
                <label for="Message">Description</label>
                <textarea cols="50" rows="4" name="Message" class="form-control" id="Message" ng-model="menu.description" required>
                </textarea>
              </div>
            </div>
            <div class="form-inline col-lg-12">
              <div class="pull-right">
                <a class="btn btn-primary btn-sm" ng-click="menu.items.push({ order: menu.items.length + 1, type: 'URL', sub : false})">Add Item</a>
              </div>
            </div>
            <div class="col-lg-12" ng-repeat="item in menu.items"  style="margin-top: 10px;">
                <div class="col-xs-1">
                    <i class="fa fa-hand-o-right fa-2x"></i>
                </div>
              <div class="col-xs-2">
                <input type="text" placeholder="Item Name" ng-model="item.name" class="form-control">
              </div>
              <div class="col-xs-2">
                <select class="form-control" ng-model="item.type" ng-options="i for i in types">
                </select>
              </div>
              <div class="col-xs-2">
                <input type="text" placeholder="URL" ng-show="item.type === 'URL'" ng-model="item.link" class="form-control">
                <span ng-show="item.type === 'Post'">   <select
                  data-placeholder="Select post"
                  class="form-control"
                  chosen
                  ng-model="item.link"
                  ng-options="item.id as item.title for item in posts">
                </select></span>
               <span ng-show="item.type === 'Category'">
                <select
                  data-placeholder="Select Category"
                  class="form-control"
                  chosen
                  ng-model="item.link"
                  ng-options="item.id as item.name for item in categories">
                </select>
                </span>
               <span ng-show="item.type === 'Page'">
                <select
                  data-placeholder="Select Page"
                  class="form-control"
                  chosen
                  ng-model="item.link"
                  ng-options="item.id as item.title for item in pages">
                </select>
                </span>
               <span ng-show="item.type === 'Gallery'">
                <select
                  data-placeholder="Select Gallery"
                  class="form-control"
                  chosen
                  ng-model="item.link"
                  ng-options="item.id as item.title for item in posts">
                </select>
                </span>

              </div>
              <div class="col-xs-2">
                <a class="btn btn-danger" ng-click="menu.items.splice(menu.items.indexOf(item), 1)">Remove</a>



              </div>
              <div class="col-xs-2">
                <a class="btn btn-success" ng-click="addSubitem(item)">Add Subitem</a>
            </div>
              <div class="col-xs-12" ng-show="item.sub === true" style="margin-left: 80px;" ng-repeat="subitem in item.subitems">
                </br>
                 <div class="col-xs-1">
                    <i class="fa fa-hand-o-up fa-2x"></i>
                </div>
              <div class="col-xs-2">
                <input type="text" placeholder="Item Name" ng-model="subitem.name" class="form-control">
              </div>
              <div class="col-xs-2">
                <select class="form-control" ng-model="subitem.type" ng-options="i for i in typesTwo">
                </select>
              </div>
              <div class="col-xs-2">
                <input type="text" placeholder="URL" ng-show="subitem.type === 'URL'" ng-model="subitem.link" class="form-control">
                <span ng-show="subitem.type === 'Post'">   <select
                  data-placeholder="Select post"
                  class="form-control"
                  chosen
                  ng-model="subitem.link"
                  ng-options="item.id as item.title for item in posts">
                </select></span>
               <span ng-show="subitem.type === 'Category'">
                <select
                  data-placeholder="Select Category"
                  class="form-control"
                  chosen
                  ng-model="subitem.link"
                  ng-options="item.id as item.name for item in categories">
                </select>
                </span>
              <span ng-show="subitem.type === 'Page'">
                <select
                  data-placeholder="Select Page"
                  class="form-control"
                  chosen
                  ng-model="subitem.link"
                  ng-options="item.id as item.title for item in pages">
                </select>
                </span>
               <span ng-show="subitem.type === 'Gallery'">
                <select
                  data-placeholder="Select Gallery"
                  class="form-control"
                  chosen
                  ng-model="subitem.link"
                  ng-options="item.id as item.title for item in posts">
                </select>
                </span>

              </div>
              <div class="col-xs-2">
                <a class="btn btn-danger" ng-click="item.subitems.splice(item.subitems.indexOf(subitem), 1)">Remove</a>
              </div>
                </div>
            </div>
            <div class="form-group col-lg-12">
              <br>
              <a class="btn btn-primary" ng-click="submitMenu(menu)">{{buttonText}}</a>
              <a href="#/dashboard/menus">
              <button type="button" class="btn btn-danger">Cancel</button>
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
